(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{176:function(t,n,e){"use strict";e.r(n);var l={name:"Dream Cheeky USB WebMail Notifier"},v=e(8),component=Object(v.a)(l,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",[e("p",[t._v("Years ago I bought this silly device thinking it would be a neat gadget to have in the office, however as with most of there things it got used for a little bit and then stored away."),e("br"),t._v("\nThen one day I was browsing the internet and found this "),e("a",{attrs:{href:"https://www.instructables.com/id/Hack-a-cheap-usb-gadget-into-a-Color-Changing-Crys/"}},[t._v("instructables")]),t._v(" article showing someone had turned it into a glowing rock, and I thought I could probably do something similar."),e("br"),t._v("\nThrough the article I found a "),e("a",{attrs:{href:"https://github.com/gbrayut/dreamcheekyusb"}},[t._v("repository")]),t._v(" of an open source driver written in C# for the device, even though I would be using JavaScript it did provide various HEX sequences I needed in order to talk to the device."),e("br"),t._v(" "),e("br")]),t._v(" "),e("p",[t._v("But first off I needed to get the "),e("strong",[t._v("vendorID")]),t._v(" and "),e("strong",[t._v("productID")]),t._v(" of the device, this can be accomplished by using the "),e("a",{attrs:{href:"https://github.com/tessel/node-usb"}},[t._v("node-usb")]),t._v(" library and plugging in the device, then reading the data.")]),t._v(" "),e("pre",[e("code",{staticClass:"language-JS"},[e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" usb = "),e("span",{staticClass:"hljs-built_in"},[t._v("require")]),t._v("("),e("span",{staticClass:"hljs-string"},[t._v("'usb'")]),t._v(")\n\nusb.on("),e("span",{staticClass:"hljs-string"},[t._v("'attach'")]),t._v(", "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),e("span",{staticClass:"hljs-params"},[t._v("device")]),t._v(") ")]),t._v("{\n  "),e("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".log(device)\n})\n")])]),t._v(" "),e("p",[t._v("And what we get is something like this.")]),t._v(" "),e("pre",[e("code",{staticClass:"language-JSON"},[t._v("Device {\n  busNumber: "),e("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(",\n  deviceAddress: "),e("span",{staticClass:"hljs-number"},[t._v("3")]),t._v(",\n  deviceDescriptor:\n   { bLength: "),e("span",{staticClass:"hljs-number"},[t._v("18")]),t._v(",\n     bDescriptorType: "),e("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(",\n     bcdUSB: "),e("span",{staticClass:"hljs-number"},[t._v("272")]),t._v(",\n     bDeviceClass: "),e("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(",\n     bDeviceSubClass: "),e("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(",\n     bDeviceProtocol: "),e("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(",\n     bMaxPacketSize0: "),e("span",{staticClass:"hljs-number"},[t._v("8")]),t._v(",\n     idVendor: "),e("span",{staticClass:"hljs-number"},[t._v("7476")]),t._v(",\n     idProduct: "),e("span",{staticClass:"hljs-number"},[t._v("4")]),t._v(",\n     bcdDevice: "),e("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(",\n     iManufacturer: "),e("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(",\n     iProduct: "),e("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(",\n     iSerialNumber: "),e("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(",\n     bNumConfigurations: "),e("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" },\n  portNumbers: [ "),e("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("4")]),t._v(" ] }\n")])]),t._v(" "),e("p",[t._v("As we can tell by the data the "),e("strong",[t._v("vendorID")]),t._v(" is "),e("em",[t._v("7476")]),t._v(" and the "),e("strong",[t._v("productID")]),t._v(" is "),e("em",[t._v("4")]),t._v(".\n"),e("br"),t._v(" "),e("br")]),t._v(" "),e("p",[t._v("Now that I knew the "),e("strong",[t._v("vendorID")]),t._v(" and "),e("strong",[t._v("productID")]),t._v(" of the device I could easily tap into it and transfer data."),e("br"),t._v("\nThe initialization sequences seem to be needed to ensure that the device works when connecting it, there was also 4 of them but the first one worked for me."),e("br"),t._v("\nYou may need to try one of the other ones if you're doing this yourself."),e("br"),t._v("\nThe color sequence seems to be three RGB values followed by 5 other HEX values, I'm still not sure about the significance of these values.")]),t._v(" "),e("pre",[e("code",{staticClass:"language-JS"},[e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" usb = "),e("span",{staticClass:"hljs-built_in"},[t._v("require")]),t._v("("),e("span",{staticClass:"hljs-string"},[t._v("'usb'")]),t._v(")\n\n"),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" vendorID = "),e("span",{staticClass:"hljs-string"},[t._v("'7476'")]),t._v("\n"),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" productID = "),e("span",{staticClass:"hljs-string"},[t._v("'4'")]),t._v("\n\n"),e("span",{staticClass:"hljs-comment"},[t._v("// Initialization sequences")]),t._v("\n"),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" init01 = ["),e("span",{staticClass:"hljs-number"},[t._v("0x1F")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x02")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x5F")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x1F")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x03")]),t._v("]\n"),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" init02 = ["),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x02")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x5F")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x1F")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x04")]),t._v("]\n"),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" init03 = ["),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x1F")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x05")]),t._v("]\n"),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" init04 = ["),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x01")]),t._v("]\n\n"),e("span",{staticClass:"hljs-comment"},[t._v("// Find device as application start in case it's already connected")]),t._v("\n"),e("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" webmailNotifier = usb.findByIds(vendorID, productID)\n\n"),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" "),e("span",{staticClass:"hljs-title"},[t._v("initiate")]),t._v("("),e("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n  "),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" initBuffer = "),e("span",{staticClass:"hljs-keyword"},[t._v("new")]),t._v(" Buffer.from(init01)\n\n  webmailNotifier.open()\n\n  "),e("span",{staticClass:"hljs-comment"},[t._v("// Initial transfer, needed to make the device accessible")]),t._v("\n  webmailNotifier.controlTransfer("),e("span",{staticClass:"hljs-number"},[t._v("0x21")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x9")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x200")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x0")]),t._v(", initBuffer, "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),e("span",{staticClass:"hljs-params"},[t._v("err")]),t._v(") ")]),t._v("{\n    "),e("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (err) "),e("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" "),e("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".log(err)\n\n    "),e("span",{staticClass:"hljs-comment"},[t._v("// Turn LED off")]),t._v("\n    changeColor(["),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v("])\n\n    "),e("span",{staticClass:"hljs-comment"},[t._v("// Set color to red")]),t._v("\n    changeColor(["),e("span",{staticClass:"hljs-number"},[t._v("0x80")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x00")]),t._v("])\n  })\n}\n\n"),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" "),e("span",{staticClass:"hljs-title"},[t._v("changeColor")]),t._v("("),e("span",{staticClass:"hljs-params"},[t._v("rgb")]),t._v(") ")]),t._v("{\n  "),e("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" colorBuffer = Buffer.from(rgb.concat(["),e("span",{staticClass:"hljs-number"},[t._v("0xFF")]),t._v(","),e("span",{staticClass:"hljs-number"},[t._v("0xFF")]),t._v(","),e("span",{staticClass:"hljs-number"},[t._v("0xFF")]),t._v(","),e("span",{staticClass:"hljs-number"},[t._v("0x1F")]),t._v(","),e("span",{staticClass:"hljs-number"},[t._v("0x05")]),t._v("]))\n  webmailNotifier.controlTransfer("),e("span",{staticClass:"hljs-number"},[t._v("0x21")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x9")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x200")]),t._v(", "),e("span",{staticClass:"hljs-number"},[t._v("0x0")]),t._v(", colorBuffer)\n}\n\n"),e("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (webmailNotifier) {\n  initiate()\n}\n\n"),e("span",{staticClass:"hljs-comment"},[t._v("// Initiate device when it connects to the computer")]),t._v("\nusb.on("),e("span",{staticClass:"hljs-string"},[t._v("'attach'")]),t._v(", device => {\n  "),e("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (device.deviceDescriptor.idVendor == vendorID && device.deviceDescriptor.idProduct == productID) {\n    webmailNotifier = device\n    initiate()\n  }\n})\n\n"),e("span",{staticClass:"hljs-comment"},[t._v("// Close and remove the device when it disconnects from the computer")]),t._v("\nusb.on("),e("span",{staticClass:"hljs-string"},[t._v("'detach'")]),t._v(", device => {\n  "),e("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (device.deviceDescriptor.idVendor == vendorID && device.deviceDescriptor.idProduct == productID) {\n    device.close()\n    webmailNotifier = "),e("span",{staticClass:"hljs-literal"},[t._v("undefined")]),t._v("\n  }\n})\n")])]),t._v(" "),e("br"),t._v(" "),e("p",[t._v("Here's a small demo application I made to demonstrate what you might be able to do with the device, if you're interested the source code is available on "),e("a",{attrs:{href:"https://github.com/kniffen/Dream-Cheeky-USB-WebMail-Notifier"}},[t._v("GitHub")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/projects/dream-cheeky-usb-webmail-notifier/demo.gif",alt:"demo gif"}})]),t._v(" "),e("p",[e("strong",[t._v("Credits")]),e("br"),t._v(" "),e("a",{attrs:{href:"https://www.instructables.com/id/Hack-a-cheap-usb-gadget-into-a-Color-Changing-Crys/"}},[t._v("Instructables")]),e("br"),t._v(" "),e("a",{attrs:{href:"https://archive.codeplex.com/?p=dreamcheekyusb"}},[t._v("codeplex")])])])}],!1,null,null,null);n.default=component.exports}}]);